<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>COCINA | Clandestino</title>
    <style>
        body { background: #000; color: #fff; font-family: 'Courier New', monospace; padding: 20px; }
        .ticket { border: 2px solid #d4af37; padding: 15px; border-radius: 10px; margin-bottom: 20px; background: #111; }
        .header-t { padding: 10px; font-weight: bold; margin-bottom: 10px; text-transform: uppercase; }
        .btn-listo { width: 100%; padding: 10px; font-weight: bold; cursor: pointer; border: none; margin-top: 10px; }
    </style>
</head>
<body>
    <h1 style="color:#d4af37; text-align:center;">COMANDAS CLANDESTINAS</h1>
    <div id="panel">CARGANDO PEDIDOS...</div>

    <script>
        const urlDB = "https://sandwich-clandestinos-default-rtdb.firebaseio.com/pedidos.json";

        async function cargar() {
            const res = await fetch(urlDB);
            const data = await res.json();
            const container = document.getElementById('panel');
            container.innerHTML = "";
            if(!data) return container.innerHTML = "SIN PEDIDOS";

            Object.keys(data).reverse().forEach(id => {
                const p = data[id];
                const esDig = p.metodo === 'Electr√≥nico';
                const color = esDig ? '#00d4ff' : '#d4af37';

                container.innerHTML += `
                    <div class="ticket" style="border-color: ${color}">
                        <div class="header-t" style="background:${color}; color:black;">
                            üìç ${p.direccion} ${esDig ? '[PAGO DIGITAL]' : ''}
                        </div>
                        <p><strong>CLIENTE:</strong> ${p.cliente} | <strong>TEL:</strong> ${p.telefono}</p>
                        <hr>
                        ${p.items.map(i => `‚Ä¢ ${i.n} <small>(Sin: ${i.sin})</small><br>`).join('')}
                        <hr>
                        <p><strong>TOTAL: $${p.total}</strong></p>
                        <p style="color:${color}; font-weight:bold;">${esDig ? '‚ö†Ô∏è VERIFICAR NEQUI' : 'PAGO EN EFECTIVO'}</p>
                        <button class="btn-listo" style="background:${color}" onclick="eliminar('${id}')">PEDIDO ENTREGADO</button>
                    </div>`;
            });
        }

        async function eliminar(id) {
            if(confirm("¬øEliminar comanda?")) {
                await fetch(`https://sandwich-clandestinos-default-rtdb.firebaseio.com/pedidos/${id}.json`, { method: 'DELETE' });
                cargar();
            }
        }

        setInterval(cargar, 5000);
        cargar();
    </script>
</body>
</html>
