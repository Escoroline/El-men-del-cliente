<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SÃ¡ndwich Clandestino - MenÃº</title>
    <style>
        body { font-family: sans-serif; background: #1a1a1a; color: white; text-align: center; padding: 20px; }
        .producto { background: #333; margin: 10px auto; padding: 15px; border-radius: 10px; max-width: 400px; border-left: 5px solid #ffcc00; }
        button { background: #ffcc00; border: none; padding: 10px 20px; font-weight: bold; cursor: pointer; border-radius: 5px; margin-top: 10px; }
        #carrito { margin-top: 30px; border-top: 1px solid #555; padding-top: 20px; }
    </style>
</head>
<body>
    <h1>SÃ¡ndwich Clandestino ðŸ¥ª</h1>
    <p>Haz tu pedido aquÃ­:</p>

    <div class="producto">
        <h3>SÃ¡ndwich ClÃ¡sico</h3>
        <p>Precio: $10.00</p>
        <button onclick="agregarAlPedido('SÃ¡ndwich ClÃ¡sico', 10)">Agregar</button>
    </div>

    <div class="producto">
        <h3>SÃ¡ndwich Especial</h3>
        <p>Precio: $15.00</p>
        <button onclick="agregarAlPedido('SÃ¡ndwich Especial', 15)">Agregar</button>
    </div>

    <div id="carrito">
        <h3>Tu Pedido:</h3>
        <ul id="lista-pedido" style="list-style: none; padding: 0;"></ul>
        <button id="btnEnviar" onclick="enviarACocina()" style="display:none; background: #28a745; color: white;">ENVIAR PEDIDO A COCINA</button>
    </div>

    <script>
        let pedidoActual = [];
        const urlDatabase = "https://sandwich-clandestinos-default-rtdb.firebaseio.com/pedidos.json";

        function agregarAlPedido(nombre, precio) {
            pedidoActual.push(nombre);
            actualizarInterfaz();
        }

        function actualizarInterfaz() {
            const lista = document.getElementById('lista-pedido');
            lista.innerHTML = "";
            pedidoActual.forEach(item => {
                const li = document.createElement('li');
                li.textContent = item;
                lista.appendChild(li);
            });
            document.getElementById('btnEnviar').style.display = pedidoActual.length > 0 ? 'inline-block' : 'none';
        }

        async function enviarACocina() {
            const btn = document.getElementById('btnEnviar');
            btn.disabled = true;
            btn.textContent = "Enviando...";

            const nuevoPedido = {
                items: pedidoActual,
                hora: new Date().toLocaleTimeString(),
                estado: "pendiente"
            };

            try {
                await fetch(urlDatabase, {
                    method: 'POST',
                    body: JSON.stringify(nuevoPedido)
                });
                alert("Â¡Pedido enviado con Ã©xito!");
                pedidoActual = [];
                actualizarInterfaz();
            } catch (error) {
                alert("Error al enviar pedido");
            } finally {
                btn.disabled = false;
                btn.textContent = "ENVIAR PEDIDO A COCINA";
            }
        }
    </script>
</body>
</html>
